module.exports=[59497,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),s=e.i(59756),n=e.i(61916),i=e.i(74677),l=e.i(69741),o=e.i(16795),d=e.i(87718),u=e.i(95169),c=e.i(47587),h=e.i(66012),p=e.i(70101),g=e.i(26937),m=e.i(10372),y=e.i(93695);e.i(52474);var v=e.i(220),f=e.i(7218);e.i(78417);var R=e.i(38090),E=e.i(15484);e.i(79640);var b=e.i(39184);e.i(10698),e.i(52119),e.i(80508),e.i(39345),e.i(87442),e.i(31112);var S=e.i(31293),k=e.i(62790),w=class{#e;#t=864e5;constructor(e){this.#e=e}isEventThrottled(e){let t=Date.now(),a=this.#a(e),r=this.#e.getItem(a);return!!r&&!(t-r>this.#t)||(this.#e.setItem(a,t),!1)}#a(e){let{sk:t,pk:a,payload:r,...s}=e,n={...r,...s};return JSON.stringify(Object.keys({...r,...s}).sort().map(e=>n[e]))}},T=class{#r="clerk_telemetry_throttler";getItem(e){return this.#s()[e]}setItem(e,t){try{let a=this.#s();a[e]=t,localStorage.setItem(this.#r,JSON.stringify(a))}catch(e){e instanceof DOMException&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0&&localStorage.removeItem(this.#r)}}removeItem(e){try{let t=this.#s();delete t[e],localStorage.setItem(this.#r,JSON.stringify(t))}catch{}}#s(){try{let e=localStorage.getItem(this.#r);if(!e)return{};return JSON.parse(e)}catch{return{}}}static isSupported(){return!1}},C=class{#e=new Map;#n=1e4;getItem(e){return this.#e.size>this.#n?void this.#e.clear():this.#e.get(e)}setItem(e,t){this.#e.set(e,t)}removeItem(e){this.#e.delete(e)}};let A=new Set(["error","warn","info","debug","trace"]);var x=class{#i;#l;#o={};#d=[];#u=null;constructor(e){this.#i={maxBufferSize:e.maxBufferSize??5,samplingRate:e.samplingRate??1,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:"https://clerk-telemetry.com"},e.clerkVersion?this.#o.clerkVersion=e.clerkVersion??"":this.#o.clerkVersion="",this.#o.sdk=e.sdk,this.#o.sdkVersion=e.sdkVersion,this.#o.publishableKey=e.publishableKey??"";const t=(0,S.parsePublishableKey)(e.publishableKey);t&&(this.#o.instanceType=t.instanceType),e.secretKey&&(this.#o.secretKey=e.secretKey.substring(0,16)),this.#l=new w(T.isSupported()?new T:new C)}get isEnabled(){return!("development"!==this.#o.instanceType||this.#i.disabled||"u">typeof process&&process.env&&(0,k.isTruthy)(process.env.CLERK_TELEMETRY_DISABLED))}get isDebug(){return this.#i.debug||"u">typeof process&&process.env&&(0,k.isTruthy)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){try{let t=this.#c(e.event,e.payload);if(this.#h(t.event,t),!this.#p(t,e.eventSamplingRate))return;this.#d.push({kind:"event",value:t}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(e){try{if(!this.#m(e))return;let t="string"==typeof e?.level&&A.has(e.level),a="string"==typeof e?.message&&e.message.trim().length>0,r=null,s=e?.timestamp;if("number"==typeof s||"string"==typeof s){let e=new Date(s);Number.isNaN(e.getTime())||(r=e)}if(!t||!a||null===r){this.isDebug&&"u">typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:a,timestampIsValid:null!==r});return}let n=this.#y(),i={sdk:n.name,sdkv:n.version,cv:this.#o.clerkVersion??"",lvl:e.level,msg:e.message,ts:r.toISOString(),pk:this.#o.publishableKey||null,payload:this.#v(e.context)};this.#d.push({kind:"log",value:i}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#p(e,t){return this.isEnabled&&!this.isDebug&&this.#f(e,t)}#m(e){return!0}#f(e,t){let a=Math.random();return!!(a<=this.#i.samplingRate&&(!1===this.#i.perEventSampling||void 0===t||a<=t))&&!this.#l.isEventThrottled(e)}#g(){this.#R()}#R(){let e=[...this.#d];if(this.#d=[],this.#u=null,0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),a=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",this.#i.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),a.length>0&&fetch(new URL("/v1/logs",this.#i.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:a})}).catch(()=>void 0)}#h(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))}#y(){return{name:this.#o.sdk,version:this.#o.sdkVersion}}#c(e,t){let a=this.#y();return{event:e,cv:this.#o.clerkVersion??"",it:this.#o.instanceType??"",sdk:a.name,sdkv:a.version,...this.#o.publishableKey?{pk:this.#o.publishableKey}:{},...this.#o.secretKey?{sk:this.#o.secretKey}:{},payload:t}}#v(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}}};(0,b.withLegacyReturn)(R.verifyToken);var K=e.i(57594);let N={secretKey:K.SECRET_KEY,publishableKey:K.PUBLISHABLE_KEY,apiUrl:K.API_URL,apiVersion:K.API_VERSION,userAgent:"@clerk/nextjs@6.37.1",proxyUrl:K.PROXY_URL,domain:K.DOMAIN,isSatellite:K.IS_SATELLITE,machineSecretKey:K.MACHINE_SECRET_KEY,sdkMetadata:K.SDK_METADATA,telemetry:{disabled:K.TELEMETRY_DISABLED,debug:K.TELEMETRY_DEBUG}},O=e=>{let t,a,r,s;return t={...N,...e},a=(0,R.createBackendApiClient)(t),r=(0,R.createAuthenticateRequest)({options:t,apiClient:a}),s=new x({publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{},...t.telemetry||{}}),{...a,...r,telemetry:s}};var I=e.i(73271);let _=new(e.i(78500)).AsyncLocalStorage;var D=e.i(13832);let P=async()=>{var e,t;let a;try{let e=await (0,E.buildRequestLike)(),t=(0,I.getHeader)(e,R.constants.Headers.ClerkRequestData);a=(0,D.decryptClerkRequestData)(t)}catch(e){if(e&&(0,E.isPrerenderingBailout)(e))throw e}let r=null!=(t=null==(e=_.getStore())?void 0:e.get("requestData"))?t:a;return(null==r?void 0:r.secretKey)||(null==r?void 0:r.publishableKey)?O(r):O({})};async function U(t){e.r(23502);let{userId:a}=await (0,f.auth)({treatPendingAsSignedOut:null==t?void 0:t.treatPendingAsSignedOut});return a?(await P()).users.getUser(a):null}var M=e.i(89171),L=e.i(15270);async function H(){let{userId:e}=await (0,f.auth)();if(!e)return new M.NextResponse("Unauthorized",{status:401});let t=await U();if(!t)return new M.NextResponse("User not found",{status:404});let a=t.emailAddresses[0]?.emailAddress,r=await L.prisma.user.upsert({where:{clerkId:t.id},update:{email:a,name:`${t.firstName??""} ${t.lastName??""}`.trim(),image:t.imageUrl},create:{clerkId:t.id,email:a,name:`${t.firstName??""} ${t.lastName??""}`.trim(),image:t.imageUrl}});return M.NextResponse.json(r)}e.s(["POST",()=>H],7388);var q=e.i(7388);let B=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/users/sync/route",pathname:"/api/users/sync",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/users/sync/route.ts",nextConfigOutput:"",userland:q}),{workAsyncStorage:V,workUnitAsyncStorage:j,serverHooks:F}=B;function $(){return(0,r.patchFetch)({workAsyncStorage:V,workUnitAsyncStorage:j})}async function z(e,t,r){B.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let f="/api/users/sync/route";f=f.replace(/\/index$/,"")||"/";let R=await B.prepare(e,t,{srcPage:f,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:E,params:b,nextConfig:S,parsedUrl:k,isDraftMode:w,prerenderManifest:T,routerServerContext:C,isOnDemandRevalidate:A,revalidateOnlyGenerated:x,resolvedPathname:K,clientReferenceManifest:N,serverActionsManifest:O}=R,I=(0,l.normalizeAppPath)(f),_=!!(T.dynamicRoutes[I]||T.routes[K]),D=async()=>((null==C?void 0:C.render404)?await C.render404(e,t,k,!1):t.end("This page could not be found"),null);if(_&&!w){let e=!!T.routes[K],t=T.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await D();throw new y.NoFallbackError}}let P=null;!_||B.isDev||w||(P="/index"===(P=K)?"/":P);let U=!0===B.isDev||!_,M=_&&!U;O&&N&&(0,i.setManifestsSingleton)({page:f,clientReferenceManifest:N,serverActionsManifest:O});let L=e.method||"GET",H=(0,n.getTracer)(),q=H.getActiveScopeSpan(),V={params:b,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r,s)=>B.onRequestError(e,t,r,s,C)},sharedContext:{buildId:E}},j=new o.NodeNextRequest(e),F=new o.NodeNextResponse(t),$=d.NextRequestAdapter.fromNodeNextRequest(j,(0,d.signalFromNodeResponse)(t));try{let i=async e=>B.handle($,V).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=H.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${L} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${f}`)}),l=!!(0,s.getRequestMeta)(e,"minimalMode"),o=async s=>{var n,o;let d=async({previousCacheEntry:a})=>{try{if(!l&&A&&x&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(s);e.fetchMetrics=V.renderOpts.fetchMetrics;let o=V.renderOpts.pendingWaitUntil;o&&r.waitUntil&&(r.waitUntil(o),o=void 0);let d=V.renderOpts.collectedTags;if(!_)return await (0,h.sendResponse)(j,F,n,V.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,p.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[m.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==V.renderOpts.collectedRevalidate&&!(V.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&V.renderOpts.collectedRevalidate,r=void 0===V.renderOpts.collectedExpire||V.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:V.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await B.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:A})},!1,C),t}},u=await B.handleResponse({req:e,nextConfig:S,cacheKey:P,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:x,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:l});if(!_)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(o=u.value)?void 0:o.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",A?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let y=(0,p.fromNodeOutgoingHttpHeaders)(u.value.headers);return l&&_||y.delete(m.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||y.get("Cache-Control")||y.set("Cache-Control",(0,g.getCacheControlHeader)(u.cacheControl)),await (0,h.sendResponse)(j,F,new Response(u.value.body,{headers:y,status:u.value.status||200})),null};q?await o(q):await H.withPropagatedContext(e.headers,()=>H.trace(u.BaseServerSpan.handleRequest,{spanName:`${L} ${f}`,kind:n.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},o))}catch(t){if(t instanceof y.NoFallbackError||await B.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:A})},!1,C),_)throw t;return await (0,h.sendResponse)(j,F,new Response(null,{status:500})),null}}e.s(["handler",()=>z,"patchFetch",()=>$,"routeModule",()=>B,"serverHooks",()=>F,"workAsyncStorage",()=>V,"workUnitAsyncStorage",()=>j],59497)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_8ff3b030.js.map