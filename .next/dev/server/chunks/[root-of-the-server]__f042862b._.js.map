{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hotel/Documents/GitHub/clianex-commerce-ai/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") {\n  globalForPrisma.prisma = prisma;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hotel/Documents/GitHub/clianex-commerce-ai/app/api/modules/route.js"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport { NextResponse } from \"next/server\";\n\nexport async function GET() {\n  const { userId } = auth();\n  if (!userId) return NextResponse.json([], { status: 200 });\n\n  const modules = await prisma.userModule.findMany({\n    where: { userId },\n    include: { module: true },\n  });\n\n  return NextResponse.json(modules);\n}\n\nexport async function POST(req) {\n  const { userId } = auth();\n  if (!userId) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n  const { moduleKey } = await req.json();\n\n  const module = await prisma.module.findUnique({\n    where: { key: moduleKey },\n  });\n\n  if (!module) {\n    return NextResponse.json({ error: \"Module not found\" }, { status: 404 });\n  }\n\n  const existing = await prisma.userModule.findUnique({\n    where: {\n      userId_moduleId: {\n        userId,\n        moduleId: module.id,\n      },\n    },\n  });\n\n  if (existing) {\n    await prisma.userModule.update({\n      where: { id: existing.id },\n      data: { active: !existing.active },\n    });\n  } else {\n    await prisma.userModule.create({\n      data: {\n        userId,\n        moduleId: module.id,\n        active: true,\n      },\n    });\n  }\n\n  return NextResponse.json({ success: true });\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;IACvB,IAAI,CAAC,QAAQ,OAAO,gJAAY,CAAC,IAAI,CAAC,EAAE,EAAE;QAAE,QAAQ;IAAI;IAExD,MAAM,UAAU,MAAM,yHAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;QAC/C,OAAO;YAAE;QAAO;QAChB,SAAS;YAAE,QAAQ;QAAK;IAC1B;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,GAAG;IAC5B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,6LAAI;IACvB,IAAI,CAAC,QAAQ,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAe,GAAG;QAAE,QAAQ;IAAI;IAE/E,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,IAAI;IAEpC,MAAM,SAAS,MAAM,yHAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAC5C,OAAO;YAAE,KAAK;QAAU;IAC1B;IAEA,IAAI,CAAC,QAAQ;QACX,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,MAAM,WAAW,MAAM,yHAAM,CAAC,UAAU,CAAC,UAAU,CAAC;QAClD,OAAO;YACL,iBAAiB;gBACf;gBACA,UAAU,OAAO,EAAE;YACrB;QACF;IACF;IAEA,IAAI,UAAU;QACZ,MAAM,yHAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,OAAO;gBAAE,IAAI,SAAS,EAAE;YAAC;YACzB,MAAM;gBAAE,QAAQ,CAAC,SAAS,MAAM;YAAC;QACnC;IACF,OAAO;QACL,MAAM,yHAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,MAAM;gBACJ;gBACA,UAAU,OAAO,EAAE;gBACnB,QAAQ;YACV;QACF;IACF;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC3C"}}]
}